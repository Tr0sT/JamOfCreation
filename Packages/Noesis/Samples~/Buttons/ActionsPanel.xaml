<UserControl xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <UserControl.Resources>
    <Style x:Key="BarContainer" TargetType="Border">
      <Setter Property="CornerRadius" Value="8"/>
      <Setter Property="Padding" Value="6"/>
      <Setter Property="Background" Value="#202226"/>
    </Style>
    <DataTemplate x:Key="ActionItemTemplate">
      <Border x:Name="ActionBorder" Padding="10" Margin="0,6,0,6" CornerRadius="6">
        <Grid>
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
          </Grid.ColumnDefinitions>
          <Border Width="40" Height="40" Background="#1E1E1E" CornerRadius="6" Margin="0,0,12,0" />
          <StackPanel Grid.Column="1" VerticalAlignment="Center">
            <TextBlock Text="{Binding Title}" FontSize="18" Foreground="#FFFFFF"/>
            <TextBlock Text="{Binding Description}" FontSize="13" Foreground="#BFBFBF"
                       TextTrimming="CharacterEllipsis" MaxWidth="380"/>
          </StackPanel>
          <TextBlock Grid.Column="2" Text="{Binding Cost}" VerticalAlignment="Center" FontSize="16" Foreground="#D8D8D8" />
          <Border.ToolTip>
            <StackPanel Margin="8">
              <TextBlock Text="{Binding Title}" FontWeight="Bold"/>
              <TextBlock Text="{Binding Description}" TextWrapping="Wrap" Margin="0,6,0,0"/>
              <TextBlock Text="{Binding Duration, StringFormat=Длительность: {0:mm\\:ss}}" Margin="0,6,0,0"/>
              <TextBlock Text="{Binding Cost, StringFormat=Стоимость: {0}}" Margin="0,4,0,0"/>
            </StackPanel>
          </Border.ToolTip>
        </Grid>
      </Border>
    </DataTemplate>
  </UserControl.Resources>

  <StackPanel>
    <TextBlock Text="ДЕЙСТВИЯ:" FontSize="22" Foreground="#FFF" Margin="0,0,0,8"/>
    <ScrollViewer Height="420" VerticalScrollBarVisibility="Auto">
      <ItemsControl ItemsSource="{Binding ActionsPanelViewModel.AvailableActions}"
                    ItemTemplate="{StaticResource ActionItemTemplate}"/>
    </ScrollViewer>
    <Border Background="#2A2F36" CornerRadius="8" Padding="14" Margin="0,12,0,0" >
      <StackPanel>
        <TextBlock Text="{Binding ActionsPanelViewModel.CurrentAction.Title}" FontSize="20" Foreground="#FFF"/>
        <Grid Margin="0,8,0,0">
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
          </Grid.ColumnDefinitions>
          <Border Style="{StaticResource BarContainer}" Height="18" VerticalAlignment="Center">
            <Grid>
              <Rectangle Fill="#2C2F33"/>
              <Rectangle Fill="#6FA8DC" HorizontalAlignment="Stretch" RenderTransformOrigin="0,0.5">
                <Rectangle.RenderTransform>
                  <ScaleTransform ScaleX="{Binding ActionsPanelViewModel.CurrentAction.Progress}" />
                </Rectangle.RenderTransform>
              </Rectangle>
            </Grid>
          </Border>
          <TextBlock Grid.Column="1" Text="{Binding ActionsPanelViewModel.CurrentAction.RemainingTime, StringFormat={}{0:mm\\:ss}}" Margin="8,0,0,0" VerticalAlignment="Center" Foreground="#FFF"/>
        </Grid>
        <TextBlock Text="{Binding ActionsPanelViewModel.CurrentAction.Description}" Foreground="#CFCFCF" Margin="0,6,0,0" TextWrapping="Wrap"/>
      </StackPanel>
    </Border>
  </StackPanel>
</UserControl>